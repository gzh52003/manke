(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75cb61dd"],{"0fee":function(t,e,n){},1175:function(t,e,n){},"20fb":function(t,e,n){"use strict";var i=n("2638"),a=n.n(i),s=n("d282"),o=n("a142"),r=n("ea8e"),c=n("a8fa"),u=n("1325"),l=n("482d"),h=n("90c6"),d=n("78eb"),m=Object(s["a"])("stepper"),p=m[0],f=m[1],b=600,g=200;function v(t,e){return String(t)===String(e)}function y(t,e){var n=Math.pow(10,10);return Math.round((t+e)*n)/n}e["a"]=p({mixins:[d["a"]],props:{value:null,theme:String,integer:Boolean,disabled:Boolean,allowEmpty:Boolean,inputWidth:[Number,String],buttonSize:[Number,String],asyncChange:Boolean,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,decimalLength:[Number,String],name:{type:[Number,String],default:""},min:{type:[Number,String],default:1},max:{type:[Number,String],default:1/0},step:{type:[Number,String],default:1},defaultValue:{type:[Number,String],default:1},showPlus:{type:Boolean,default:!0},showMinus:{type:Boolean,default:!0},longPress:{type:Boolean,default:!0}},data:function(){var t=Object(o["c"])(this.value)?this.value:this.defaultValue,e=this.format(t);return v(e,this.value)||this.$emit("input",e),{currentValue:e}},computed:{minusDisabled:function(){return this.disabled||this.disableMinus||this.currentValue<=+this.min},plusDisabled:function(){return this.disabled||this.disablePlus||this.currentValue>=+this.max},inputStyle:function(){var t={};return this.inputWidth&&(t.width=Object(r["a"])(this.inputWidth)),this.buttonSize&&(t.height=Object(r["a"])(this.buttonSize)),t},buttonStyle:function(){if(this.buttonSize){var t=Object(r["a"])(this.buttonSize);return{width:t,height:t}}}},watch:{max:"check",min:"check",integer:"check",decimalLength:"check",value:function(t){v(t,this.currentValue)||(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t,{name:this.name})}},methods:{check:function(){var t=this.format(this.currentValue);v(t,this.currentValue)||(this.currentValue=t)},formatNumber:function(t){return Object(l["a"])(String(t),!this.integer)},format:function(t){return this.allowEmpty&&""===t||(t=this.formatNumber(t),t=""===t?0:+t,t=Object(h["a"])(t)?this.min:t,t=Math.max(Math.min(this.max,t),this.min),Object(o["c"])(this.decimalLength)&&(t=t.toFixed(this.decimalLength))),t},onInput:function(t){var e=t.target.value,n=this.formatNumber(e);if(Object(o["c"])(this.decimalLength)&&-1!==n.indexOf(".")){var i=n.split(".");n=i[0]+"."+i[1].slice(0,this.decimalLength)}v(e,n)||(t.target.value=n),this.emitChange(n)},emitChange:function(t){this.asyncChange?(this.$emit("input",t),this.$emit("change",t,{name:this.name})):this.currentValue=t},onChange:function(){var t=this.type;if(this[t+"Disabled"])this.$emit("overlimit",t);else{var e="minus"===t?-this.step:+this.step,n=this.format(y(+this.currentValue,e));this.emitChange(n),this.$emit(t)}},onFocus:function(t){this.disableInput&&this.$refs.input?this.$refs.input.blur():this.$emit("focus",t)},onBlur:function(t){var e=this.format(t.target.value);t.target.value=e,this.currentValue=e,this.$emit("blur",t),Object(c["a"])()},longPressStep:function(){var t=this;this.longPressTimer=setTimeout((function(){t.onChange(),t.longPressStep(t.type)}),g)},onTouchStart:function(){var t=this;this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress=!1,this.longPressTimer=setTimeout((function(){t.isLongPress=!0,t.onChange(),t.longPressStep()}),b))},onTouchEnd:function(t){this.longPress&&(clearTimeout(this.longPressTimer),this.isLongPress&&Object(u["c"])(t))}},render:function(){var t=this,e=arguments[0],n=function(e){return{on:{click:function(n){n.preventDefault(),t.type=e,t.onChange()},touchstart:function(){t.type=e,t.onTouchStart()},touchend:t.onTouchEnd,touchcancel:t.onTouchEnd}}};return e("div",{class:f([this.theme])},[e("button",a()([{directives:[{name:"show",value:this.showMinus}],attrs:{type:"button"},style:this.buttonStyle,class:f("minus",{disabled:this.minusDisabled})},n("minus")])),e("input",{ref:"input",attrs:{type:this.integer?"tel":"text",role:"spinbutton",disabled:this.disabled,readonly:this.disableInput,inputmode:this.integer?"numeric":"decimal",placeholder:this.placeholder,"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.currentValue},class:f("input"),domProps:{value:this.currentValue},style:this.inputStyle,on:{input:this.onInput,focus:this.onFocus,blur:this.onBlur}}),e("button",a()([{directives:[{name:"show",value:this.showPlus}],attrs:{type:"button"},style:this.buttonStyle,class:f("plus",{disabled:this.plusDisabled})},n("plus")]))])}})},"4cf9":function(t,e,n){},"569c":function(t,e,n){},"5c56":function(t,e,n){},6957:function(t,e,n){"use strict";var i=n("569c"),a=n.n(i);a.a},"80ee":function(t,e,n){},8248:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-swipe",{staticClass:"my-swipe"},[n("van-swipe-item",[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.data.src,expression:"data.src"}]})])],1),n("van-panel",{attrs:{title:"",status:"",id:"goodsname"}},[n("span",{staticClass:"line"},[n("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.data.name))])]),n("br"),n("span",{staticStyle:{"border-bottom":"1px solid #f5f6f7"}},[t._v(" 本店价: "),n("span",{staticClass:"pic"},[t._v(t._s(t.data.price))]),t._v("市场价: "),n("del",[t._v(t._s(t.data.price))])]),n("span",{staticClass:"iLike"},[n("van-icon",{attrs:{name:"star-o"}}),t._v("收藏 ")],1),n("br"),n("span",{staticStyle:{display:"block","padding-top":"10px"}},[t._v("库存:"+t._s(t.data.count))])]),n("span",{staticStyle:{"margin-left":"10px","padding-top":"10px",display:"block"}},[t._v("数量")]),n("van-stepper",{staticStyle:{"padding-left":"10px",margin:"5px 0"},attrs:{id:"stepper","input-width":"60px","button-size":"60px"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),n("van-goods-action",[n("van-goods-action-icon",{attrs:{icon:"home-o",text:"首页",color:"#07c160"},on:{click:t.goHome}}),n("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车"},on:{click:t.goCart}}),n("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服",color:"#ff5000"}}),n("van-goods-action-button",{attrs:{type:"warning",text:"加入购物车"},on:{click:function(){t.addCart(t.data._name)}}}),n("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"}})],1)],1)},a=[],s=(n("b0c0"),n("96cf"),n("1da1")),o=(n("68ef"),n("9d70"),n("3743"),n("80ee"),n("c31d")),r=n("d282"),c=n("a142"),u=n("48f4"),l=n("9884"),h=n("6f2f"),d=n("ad06"),m=Object(r["a"])("goods-action-icon"),p=m[0],f=m[1],b=p({mixins:[Object(l["a"])("vanGoodsAction")],props:Object(o["a"])({},u["c"],{dot:Boolean,text:String,icon:String,color:String,info:[Number,String],badge:[Number,String],iconClass:null}),methods:{onClick:function(t){this.$emit("click",t),Object(u["b"])(this.$router,this)},genIcon:function(){var t=this.$createElement,e=this.slots("icon"),n=Object(c["c"])(this.badge)?this.badge:this.info;return e?t("div",{class:f("icon")},[e,t(h["a"],{attrs:{dot:this.dot,info:n}})]):t(d["a"],{class:[f("icon"),this.iconClass],attrs:{tag:"div",dot:this.dot,info:n,name:this.icon,color:this.color}})}},render:function(){var t=arguments[0];return t("div",{attrs:{role:"button",tabindex:"0"},class:f(),on:{click:this.onClick}},[this.genIcon(),this.slots()||this.text])}}),g=(n("e3b3"),n("bc1b"),n("1175"),n("82a8")),v=(n("4cf9"),n("bb33")),y=(n("f06a"),n("20fb")),S=(n("66b9"),n("b650")),x=(n("1a04"),n("5c56"),n("0fee"),n("2638")),w=n.n(x),$=n("ba31"),O=n("b1d2"),j=n("7744"),k=Object(r["a"])("cell-group"),C=k[0],_=k[1];function B(t,e,n,i){var a,s=t("div",w()([{class:[_(),(a={},a[O["f"]]=e.border,a)]},Object($["b"])(i,!0)]),[null==n.default?void 0:n.default()]);return e.title||n.title?t("div",[t("div",{class:_("title")},[n.title?n.title():e.title]),s]):s}B.props={title:String,border:{type:Boolean,default:!0}};var P=C(B),T=Object(r["a"])("panel"),V=T[0],N=T[1];function L(t,e,n,i){var a=function(){return[n.header?n.header():t(j["a"],{attrs:{icon:e.icon,label:e.desc,title:e.title,value:e.status,valueClass:N("header-value")},class:N("header")}),t("div",{class:N("content")},[n.default&&n.default()]),n.footer&&t("div",{class:[N("footer"),O["e"]]},[n.footer()])]};return t(P,w()([{class:N(),scopedSlots:{default:a}},Object($["b"])(i,!0)]))}L.props={icon:String,desc:String,title:String,status:String};var I=V(L),z=(n("7844"),n("5596")),D=n("2b0e"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(t._s(t.aaa))])},M=[],q={props:["aaa"],created:function(){}},F=q,R=n("2877"),A=Object(R["a"])(F,E,M,!1,null,null,null),G=A.exports;D["a"].use(G),D["a"].use(z["a"]),D["a"].use(I),D["a"].use(S["a"]),D["a"].use(y["a"]),D["a"].use(v["a"]),D["a"].use(g["a"]),D["a"].use(b);var J={name:"Detail",data:function(){return{user:"",num:1,data:{}}},components:{Title:G},computed:{totalPrice:function(){return this.data.price*this.data.qty}},methods:{addCart:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id:",e.data._id),t.next=3,e.$request.get("./cart?id=".concat(e.data._id));case 3:if(n=t.sent,console.log("length:",n.data.length),console.log("this.num",e.num),0===n.data.length){t.next=15;break}return console.log("由内容"),console.log("back.data[0].count:",n.data[0].count),i=1*n.data[0].count+e.num,console.log("count",i),t.next=13,e.$request.put("./cart",{id:e.data._id,count:i,goodsId:!0});case 13:t.next=20;break;case 15:return console.log("没有内容"),t.next=18,e.$request.post("./cart",{username:"".concat(e.user.username),id:"".concat(e.data._id),name:"".concat(e.data.name),price:"".concat(e.data.price),src:"".concat(e.data.src),count:"".concat(e.num)});case 18:t.sent,console.log("添加");case 20:case"end":return t.stop()}}),t)})))()},getData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$request.get("/goods/"+t);case 2:i=n.sent,e.data=i.data.data,e.$store.commit("changeTitle",e.data.name);case 5:case"end":return n.stop()}}),n)})))()},goHome:function(){return this.$router.push("../home")},goCart:function(){return this.$router.push("../cart")}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("$route=",t.$route.query),t.user=JSON.parse(localStorage.getItem("currentUser")),console.log("this.user.username",t.user.username),n=t.$route.query.id,console.log(n),t.getData(n);case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){this.$store.commit("displayTabbar",!1)},destroyed:function(){this.$store.commit("displayTabbar",!0)}},W=J,H=(n("6957"),Object(R["a"])(W,i,a,!1,null,"633cfcfa",null));e["default"]=H.exports},"82a8":function(t,e,n){"use strict";var i=n("c31d"),a=n("d282"),s=n("48f4"),o=n("9884"),r=n("b650"),c=Object(a["a"])("goods-action-button"),u=c[0],l=c[1];e["a"]=u({mixins:[Object(o["a"])("vanGoodsAction")],props:Object(i["a"])({},s["c"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),Object(s["b"])(this.$router,this)}},render:function(){var t=arguments[0];return t(r["a"],{class:l([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}})},b0c0:function(t,e,n){var i=n("83ab"),a=n("9bf2").f,s=Function.prototype,o=s.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in s)&&a(s,c,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},bb33:function(t,e,n){"use strict";var i=n("d282"),a=n("9884"),s=Object(i["a"])("goods-action"),o=s[0],r=s[1];e["a"]=o({mixins:[Object(a["b"])("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:r({unfit:!this.safeAreaInsetBottom})},[this.slots()])}})},f06a:function(t,e,n){"use strict";n("68ef"),n("fb6c")},fb6c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-75cb61dd.e679b8f4.js.map