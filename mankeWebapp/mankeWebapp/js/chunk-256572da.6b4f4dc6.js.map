{"version":3,"sources":["webpack:///./node_modules/vant/es/picker/shared.js","webpack:///./src/views/profile/edit.vue?c4f8","webpack:///src/views/profile/edit.vue","webpack:///./src/views/profile/edit.vue?4cc8","webpack:///./src/views/profile/edit.vue","webpack:///./node_modules/vant/es/form/style/index.js","webpack:///./node_modules/vant/es/form/index.js","webpack:///./node_modules/vant/es/utils/deep-clone.js","webpack:///./node_modules/vant/es/picker/PickerColumn.js","webpack:///./node_modules/vant/es/picker/index.js"],"names":["DEFAULT_ITEM_HEIGHT","pickerProps","title","String","loading","Boolean","itemHeight","Number","showToolbar","cancelButtonText","confirmButtonText","allowHtml","type","default","visibleItemCount","swipeDuration","render","_vm","this","_h","$createElement","_c","_self","staticStyle","on","onSubmit","attrs","avatar","staticClass","avatarChange","model","value","callback","$$v","$set","expression","password","age","gender","$event","showPicker","columns","onConfirm","_v","staticRenderFns","data","username","imageUrl","_id","methods","created","res","avatarUrl","component","_createNamespace","createComponent","bem","props","colon","labelWidth","labelAlign","inputAlign","scrollToError","validateFirst","errorMessageAlign","submitOnEnter","validateTrigger","showError","showErrorMessage","provide","vanForm","fields","validateSeq","_this","Promise","resolve","reject","errors","reduce","promise","field","then","length","validate","error","push","validateAll","_this2","all","map","item","filter","name","validateField","matched","resetValidation","forEach","scrollToField","options","$el","scrollIntoView","addField","removeField","getValues","form","formValue","event","preventDefault","submit","_this3","values","$emit","catch","h","arguments","slots","deepClone","obj","Array","isArray","DEFAULT_DURATION","MOMENTUM_LIMIT_TIME","MOMENTUM_LIMIT_DISTANCE","create","getElementTranslateY","element","style","window","getComputedStyle","transform","webkitTransform","translateY","slice","split","isOptionDisabled","option","disabled","mixins","valueKey","className","defaultIndex","initialOptions","offset","duration","currentIndex","$parent","children","setIndex","mounted","bindTouchEvent","destroyed","splice","indexOf","watch","val","computed","count","baseOffset","setOptions","JSON","stringify","onTouchStart","touchStart","moving","$refs","wrapper","Math","min","startOffset","transitionEndTrigger","touchStartTime","Date","now","momentumOffset","onTouchMove","touchMove","direction","deltaY","onTouchEnd","distance","allowMomentum","abs","momentum","index","getIndexByOffset","setTimeout","onTransitionEnd","stopMomentum","onClickItem","adjustIndex","i","_i","getOptionText","emitChange","trigger","setValue","getValue","round","speed","genOptions","optionStyle","height","_domProps","text","role","tabindex","class","selected","click","childData","domProps","wrapperStyle","transitionDuration","transitionProperty","t","toolbarPosition","formattedColumns","itemPxHeight","unit","dataType","firstColumn","handler","immediate","format","formatCascade","formatted","cursor","emit","getColumnValue","getColumnIndex","getIndexes","onCascadeChange","columnIndex","indexes","setColumnValues","onChange","getColumn","column","setColumnValue","setColumnIndex","optionIndex","getColumnValues","child","setValues","setIndexes","_this4","confirm","cancel","genTitle","titleSlot","genToolbar","genColumns","wrapHeight","frameStyle","columnsStyle","maskStyle","backgroundSize","genColumnItems","_this5","PickerColumn"],"mappings":"kHAAA,oEAAO,IAAIA,EAAsB,GACtBC,EAAc,CACvBC,MAAOC,OACPC,QAASC,QACTC,WAAY,CAACC,OAAQJ,QACrBK,YAAaH,QACbI,iBAAkBN,OAClBO,kBAAmBP,OACnBQ,UAAW,CACTC,KAAMP,QACNQ,SAAS,GAEXC,iBAAkB,CAChBF,KAAM,CAACL,OAAQJ,QACfU,QAAS,GAEXE,cAAe,CACbH,KAAM,CAACL,OAAQJ,QACfU,QAAS,O,yCClBb,IAAIG,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,YAAY,CAAC,aAAa,QAAQC,GAAG,CAAC,OAASP,EAAIQ,WAAW,CAACJ,EAAG,MAAM,CAACE,YAAY,CAAC,aAAa,WAAW,CAACF,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQ,GAAG,MAAQ,QAAQ,OAAS,QAAQ,IAAMT,EAAIU,OAAOV,EAAIU,OAAO,sBAAsBN,EAAG,QAAQ,CAACO,YAAY,oBAAoBL,YAAY,CAAC,MAAQ,SAASG,MAAM,CAAC,KAAO,QAAQF,GAAG,CAAC,OAASP,EAAIY,iBAAiB,GAAGR,EAAG,YAAY,CAACE,YAAY,CAAC,eAAe,OAAO,aAAa,OAAO,YAAY,QAAQG,MAAM,CAAC,KAAO,MAAM,MAAQ,MAAM,YAAc,MAAM,SAAW,IAAII,MAAM,CAACC,MAAOb,KAAa,SAAEc,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKhB,KAAM,WAAYe,IAAME,WAAW,mBAAmBd,EAAG,YAAY,CAACE,YAAY,CAAC,eAAe,OAAO,YAAY,QAAQG,MAAM,CAAC,KAAO,WAAW,KAAO,KAAK,MAAQ,KAAK,YAAc,MAAMI,MAAM,CAACC,MAAOd,EAAY,SAAEe,SAAS,SAAUC,GAAMhB,EAAImB,SAASH,GAAKE,WAAW,cAAcd,EAAG,YAAY,CAACE,YAAY,CAAC,eAAe,OAAO,YAAY,QAAQG,MAAM,CAAC,KAAO,KAAK,MAAQ,KAAK,YAAc,MAAMI,MAAM,CAACC,MAAOd,EAAO,IAAEe,SAAS,SAAUC,GAAMhB,EAAIoB,IAAIJ,GAAKE,WAAW,SAASd,EAAG,YAAY,CAACE,YAAY,CAAC,eAAe,QAAQG,MAAM,CAAC,SAAW,GAAG,UAAY,GAAG,MAAQ,KAAK,MAAQT,EAAIqB,OAAO,YAAc,MAAMd,GAAG,CAAC,MAAQ,SAASe,GAAQtB,EAAIuB,YAAa,MAASnB,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQ,GAAG,SAAW,UAAUI,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAIuB,WAAWP,GAAKE,WAAW,eAAe,CAACd,EAAG,aAAa,CAACK,MAAM,CAAC,eAAe,GAAG,QAAUT,EAAIwB,SAASjB,GAAG,CAAC,OAAS,SAASe,GAAQtB,EAAIuB,YAAa,GAAO,QAAUvB,EAAIyB,cAAc,GAAGrB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,cAAc,CAACF,EAAG,aAAa,CAACK,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,OAAO,cAAc,WAAW,CAACT,EAAI0B,GAAG,SAAS,IAAI,IACjzDC,EAAkB,G,8JC4DtB,mBACA,mBACA,mBAEA,OACEC,KADF,WAEI,MAAO,CACLC,SAAU,GACVV,SAAU,GACVC,IAAK,GACLC,OAAQ,GACRE,YAAY,EACZC,QAAS,CAAC,IAAK,IAAK,MACpBM,SAAU,GACVpB,OAAQ,GACRqB,IAAK,KAGTC,QAAS,CACPP,UADJ,SACA,GACMxB,KAAKoB,OAASP,EACdb,KAAKsB,YAAa,GAEpB,SALJ,WAKA,2KACA,sCACA,gBACA,QACA,QAJA,SAKA,2BACA,QACA,oBACA,oBACA,UACA,mBAVA,gBAKA,EALA,EAKA,KAQA,YACA,yBAdA,8CAiBI,aAtBJ,SAsBA,8KACA,sCACA,gBACA,QACA,eACA,eACA,kCANA,SAQA,kCACA,iBATA,OAQA,EARA,OAYA,qBAEA,YACA,wBACA,uDAhBA,gDAoBEU,QAxDF,WAyDI,IAAJ,kDACIhC,KAAK4B,SAAWK,EAAIL,SACpB5B,KAAKoB,OAASa,EAAIb,OAClBpB,KAAKmB,IAAMc,EAAId,IACfnB,KAAKS,OAASwB,EAAIC,YC9HuU,I,YCOzVC,EAAY,eACd,EACArC,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAS,E,6CClBf,W,oCCAA,4BAGIC,EAAmB,eAAgB,QACnCC,EAAkBD,EAAiB,GACnCE,EAAMF,EAAiB,GAEZ,OAAAC,EAAA,CACbE,MAAO,CACLC,MAAOrD,QACPsD,WAAY,CAACpD,OAAQJ,QACrByD,WAAYzD,OACZ0D,WAAY1D,OACZ2D,cAAezD,QACf0D,cAAe1D,QACf2D,kBAAmB7D,OACnB8D,cAAe,CACbrD,KAAMP,QACNQ,SAAS,GAEXqD,gBAAiB,CACftD,KAAMT,OACNU,QAAS,UAEXsD,UAAW,CACTvD,KAAMP,QACNQ,SAAS,GAEXuD,iBAAkB,CAChBxD,KAAMP,QACNQ,SAAS,IAGbwD,QAAS,WACP,MAAO,CACLC,QAASpD,OAGb2B,KAAM,WACJ,MAAO,CACL0B,OAAQ,KAGZtB,QAAS,CACPuB,YAAa,WACX,IAAIC,EAAQvD,KAEZ,OAAO,IAAIwD,SAAQ,SAAUC,EAASC,GACpC,IAAIC,EAAS,GAEbJ,EAAMF,OAAOO,QAAO,SAAUC,EAASC,GACrC,OAAOD,EAAQE,MAAK,WAClB,IAAKJ,EAAOK,OACV,OAAOF,EAAMG,WAAWF,MAAK,SAAUG,GACjCA,GACFP,EAAOQ,KAAKD,WAKnBV,QAAQC,WAAWM,MAAK,WACrBJ,EAAOK,OACTN,EAAOC,GAEPF,WAKRW,YAAa,WACX,IAAIC,EAASrE,KAEb,OAAO,IAAIwD,SAAQ,SAAUC,EAASC,GACpCF,QAAQc,IAAID,EAAOhB,OAAOkB,KAAI,SAAUC,GACtC,OAAOA,EAAKP,eACVF,MAAK,SAAUJ,GACjBA,EAASA,EAAOc,QAAO,SAAUD,GAC/B,OAAOA,KAGLb,EAAOK,OACTN,EAAOC,GAEPF,WAMRQ,SAAU,SAAkBS,GAC1B,OAAIA,EACK1E,KAAK2E,cAAcD,GAGrB1E,KAAK6C,cAAgB7C,KAAKsD,cAAgBtD,KAAKoE,eAExDO,cAAe,SAAuBD,GACpC,IAAIE,EAAU5E,KAAKqD,OAAOoB,QAAO,SAAUD,GACzC,OAAOA,EAAKE,OAASA,KAGvB,OAAIE,EAAQZ,OACH,IAAIR,SAAQ,SAAUC,EAASC,GACpCkB,EAAQ,GAAGX,WAAWF,MAAK,SAAUG,GAC/BA,EACFR,EAAOQ,GAEPT,UAMDD,QAAQE,UAGjBmB,gBAAiB,SAAyBH,GACxC1E,KAAKqD,OAAOyB,SAAQ,SAAUN,GACvBE,GAAQF,EAAKE,OAASA,GACzBF,EAAKK,sBAKXE,cAAe,SAAuBL,EAAMM,GAC1ChF,KAAKqD,OAAOyB,SAAQ,SAAUN,GACxBA,EAAKE,OAASA,GAChBF,EAAKS,IAAIC,eAAeF,OAI9BG,SAAU,SAAkBrB,GAC1B9D,KAAKqD,OAAOc,KAAKL,GACjB,eAAa9D,KAAKqD,OAAQrD,OAE5BoF,YAAa,SAAqBtB,GAChC9D,KAAKqD,OAASrD,KAAKqD,OAAOoB,QAAO,SAAUD,GACzC,OAAOA,IAASV,MAGpBuB,UAAW,WACT,OAAOrF,KAAKqD,OAAOO,QAAO,SAAU0B,EAAMxB,GAExC,OADAwB,EAAKxB,EAAMY,MAAQZ,EAAMyB,UAClBD,IACN,KAEL/E,SAAU,SAAkBiF,GAC1BA,EAAMC,iBACNzF,KAAK0F,UAGPA,OAAQ,WACN,IAAIC,EAAS3F,KAET4F,EAAS5F,KAAKqF,YAClBrF,KAAKiE,WAAWF,MAAK,WACnB4B,EAAOE,MAAM,SAAUD,MACtBE,OAAM,SAAUnC,GACjBgC,EAAOE,MAAM,SAAU,CACrBD,OAAQA,EACRjC,OAAQA,IAGNgC,EAAO/C,eACT+C,EAAOZ,cAAcpB,EAAO,GAAGe,WAKvC5E,OAAQ,WACN,IAAIiG,EAAIC,UAAU,GAClB,OAAOD,EAAE,OAAQ,CACf,MAASzD,IACT,GAAM,CACJ,OAAUtC,KAAKO,WAEhB,CAACP,KAAKiG,c,8LC/KN,SAASC,EAAUC,GACxB,OAAIC,MAAMC,QAAQF,GACTA,EAAI5B,KAAI,SAAUC,GACvB,OAAO0B,EAAU1B,MAIF,kBAAR2B,EACF,eAAW,GAAIA,GAGjBA,E,4BCLLG,EAAmB,IAInBC,EAAsB,IACtBC,EAA0B,GAE1BpE,EAAmB,OAAAqE,EAAA,MAAgB,iBACnCpE,EAAkBD,EAAiB,GACnCE,EAAMF,EAAiB,GAE3B,SAASsE,EAAqBC,GAC5B,IAAIC,EAAQC,OAAOC,iBAAiBH,GAChCI,EAAYH,EAAMG,WAAaH,EAAMI,gBACrCC,EAAaF,EAAUG,MAAM,EAAGH,EAAU/C,OAAS,GAAGmD,MAAM,MAAM,GACtE,OAAO9H,OAAO4H,GAGhB,SAASG,EAAiBC,GACxB,OAAO,eAASA,IAAWA,EAAOC,SAGrB,MAAAjF,EAAA,CACbkF,OAAQ,CAAC,QACThF,MAAO,CACLiF,SAAUvI,OACVQ,UAAWN,QACXsI,UAAWxI,OACXG,WAAYC,OACZqI,aAAcrI,OACdQ,cAAe,CAACR,OAAQJ,QACxBW,iBAAkB,CAACP,OAAQJ,QAC3B0I,eAAgB,CACdjI,KAAM0G,MACNzG,QAAS,WACP,MAAO,MAIbgC,KAAM,WACJ,MAAO,CACLiG,OAAQ,EACRC,SAAU,EACV7C,QAASkB,EAAUlG,KAAK2H,gBACxBG,aAAc9H,KAAK0H,eAGvB1F,QAAS,WACHhC,KAAK+H,QAAQC,UACfhI,KAAK+H,QAAQC,SAAS7D,KAAKnE,MAG7BA,KAAKiI,SAASjI,KAAK8H,eAErBI,QAAS,WACPlI,KAAKmI,eAAenI,KAAKiF,MAE3BmD,UAAW,WACT,IAAIJ,EAAWhI,KAAK+H,QAAQC,SAExBA,GACFA,EAASK,OAAOL,EAASM,QAAQtI,MAAO,IAG5CuI,MAAO,CACLZ,eAAgB,aAChBD,aAAc,SAAsBc,GAClCxI,KAAKiI,SAASO,KAGlBC,SAAU,CACRC,MAAO,WACL,OAAO1I,KAAKgF,QAAQhB,QAEtB2E,WAAY,WACV,OAAO3I,KAAKZ,YAAcY,KAAKJ,iBAAmB,GAAK,IAG3DmC,QAAS,CACP6G,WAAY,SAAoB5D,GAC1B6D,KAAKC,UAAU9D,KAAa6D,KAAKC,UAAU9I,KAAKgF,WAClDhF,KAAKgF,QAAUkB,EAAUlB,GACzBhF,KAAKiI,SAASjI,KAAK0H,gBAGvBqB,aAAc,SAAsBvD,GAGlC,GAFAxF,KAAKgJ,WAAWxD,GAEZxF,KAAKiJ,OAAQ,CACf,IAAIhC,EAAaP,EAAqB1G,KAAKkJ,MAAMC,SACjDnJ,KAAK4H,OAASwB,KAAKC,IAAI,EAAGpC,EAAajH,KAAK2I,YAC5C3I,KAAKsJ,YAActJ,KAAK4H,YAExB5H,KAAKsJ,YAActJ,KAAK4H,OAG1B5H,KAAK6H,SAAW,EAChB7H,KAAKuJ,qBAAuB,KAC5BvJ,KAAKwJ,eAAiBC,KAAKC,MAC3B1J,KAAK2J,eAAiB3J,KAAKsJ,aAE7BM,YAAa,SAAqBpE,GAChCxF,KAAK6J,UAAUrE,GAEQ,aAAnBxF,KAAK8J,YACP9J,KAAKiJ,QAAS,EACd,eAAezD,GAAO,IAGxBxF,KAAK4H,OAAS,eAAM5H,KAAKsJ,YAActJ,KAAK+J,QAAU/J,KAAK0I,MAAQ1I,KAAKZ,WAAaY,KAAKZ,YAC1F,IAAIsK,EAAMD,KAAKC,MAEXA,EAAM1J,KAAKwJ,eAAiBjD,IAC9BvG,KAAKwJ,eAAiBE,EACtB1J,KAAK2J,eAAiB3J,KAAK4H,SAG/BoC,WAAY,WACV,IAAIzG,EAAQvD,KAERiK,EAAWjK,KAAK4H,OAAS5H,KAAK2J,eAC9B9B,EAAW4B,KAAKC,MAAQ1J,KAAKwJ,eAC7BU,EAAgBrC,EAAWtB,GAAuB6C,KAAKe,IAAIF,GAAYzD,EAE3E,GAAI0D,EACFlK,KAAKoK,SAASH,EAAUpC,OAD1B,CAKA,IAAIwC,EAAQrK,KAAKsK,iBAAiBtK,KAAK4H,QACvC5H,KAAK6H,SAAWvB,EAChBtG,KAAKiI,SAASoC,GAAO,GAGrBE,YAAW,WACThH,EAAM0F,QAAS,IACd,KAELuB,gBAAiB,WACfxK,KAAKyK,gBAEPC,YAAa,SAAqBL,GAC5BrK,KAAKiJ,SAITjJ,KAAKuJ,qBAAuB,KAC5BvJ,KAAK6H,SAAWvB,EAChBtG,KAAKiI,SAASoC,GAAO,KAEvBM,YAAa,SAAqBN,GAChCA,EAAQ,eAAMA,EAAO,EAAGrK,KAAK0I,OAE7B,IAAK,IAAIkC,EAAIP,EAAOO,EAAI5K,KAAK0I,MAAOkC,IAClC,IAAKxD,EAAiBpH,KAAKgF,QAAQ4F,IAAK,OAAOA,EAGjD,IAAK,IAAIC,EAAKR,EAAQ,EAAGQ,GAAM,EAAGA,IAChC,IAAKzD,EAAiBpH,KAAKgF,QAAQ6F,IAAM,OAAOA,GAGpDC,cAAe,SAAuBzD,GACpC,OAAI,eAASA,IAAWrH,KAAKwH,YAAYH,EAChCA,EAAOrH,KAAKwH,UAGdH,GAETY,SAAU,SAAkBoC,EAAOU,GACjC,IAAI1G,EAASrE,KAEbqK,EAAQrK,KAAK2K,YAAYN,IAAU,EACnC,IAAIzC,GAAUyC,EAAQrK,KAAKZ,WAEvB4L,EAAU,WACRX,IAAUhG,EAAOyD,eACnBzD,EAAOyD,aAAeuC,EAElBU,GACF1G,EAAOwB,MAAM,SAAUwE,KAMzBrK,KAAKiJ,QAAUrB,IAAW5H,KAAK4H,OACjC5H,KAAKuJ,qBAAuByB,EAE5BA,IAGFhL,KAAK4H,OAASA,GAEhBqD,SAAU,SAAkBpK,GAG1B,IAFA,IAAImE,EAAUhF,KAAKgF,QAEV4F,EAAI,EAAGA,EAAI5F,EAAQhB,OAAQ4G,IAClC,GAAI5K,KAAK8K,cAAc9F,EAAQ4F,MAAQ/J,EACrC,OAAOb,KAAKiI,SAAS2C,IAI3BM,SAAU,WACR,OAAOlL,KAAKgF,QAAQhF,KAAK8H,eAE3BwC,iBAAkB,SAA0B1C,GAC1C,OAAO,eAAMwB,KAAK+B,OAAOvD,EAAS5H,KAAKZ,YAAa,EAAGY,KAAK0I,MAAQ,IAEtE0B,SAAU,SAAkBH,EAAUpC,GACpC,IAAIuD,EAAQhC,KAAKe,IAAIF,EAAWpC,GAChCoC,EAAWjK,KAAK4H,OAASwD,EAAQ,MAASnB,EAAW,GAAK,EAAI,GAC9D,IAAII,EAAQrK,KAAKsK,iBAAiBL,GAClCjK,KAAK6H,UAAY7H,KAAKH,cACtBG,KAAKiI,SAASoC,GAAO,IAEvBI,aAAc,WACZzK,KAAKiJ,QAAS,EACdjJ,KAAK6H,SAAW,EAEZ7H,KAAKuJ,uBACPvJ,KAAKuJ,uBACLvJ,KAAKuJ,qBAAuB,OAGhC8B,WAAY,WACV,IAAI1F,EAAS3F,KAET+F,EAAI/F,KAAKE,eACToL,EAAc,CAChBC,OAAQvL,KAAKZ,WAAa,MAE5B,OAAOY,KAAKgF,QAAQT,KAAI,SAAU8C,EAAQgD,GACxC,IAAImB,EAEAC,EAAO9F,EAAOmF,cAAczD,GAE5BC,EAAWF,EAAiBC,GAC5B1F,EAAO,CACTiF,MAAO0E,EACP9K,MAAO,CACLkL,KAAM,SACNC,SAAUrE,GAAY,EAAI,GAE5BsE,MAAO,CAACtJ,EAAI,OAAQ,CAClBgF,SAAUA,EACVuE,SAAUxB,IAAU1E,EAAOmC,gBAE7BxH,GAAI,CACFwL,MAAO,WACLnG,EAAO+E,YAAYL,MAIrB0B,EAAY,CACdH,MAAO,eACPI,UAAWR,EAAY,GAAIA,EAAU7F,EAAOlG,UAAY,YAAc,eAAiBgM,EAAMD,IAE/F,OAAOzF,EAAE,KAAM,IAAgB,CAAC,GAAIpE,IAAQ,CAACoE,EAAE,MAAO,IAAe,CAAC,GAAIgG,YAIhFjM,OAAQ,WACN,IAAIiG,EAAIC,UAAU,GACdiG,EAAe,CACjBlF,UAAW,mBAAqB/G,KAAK4H,OAAS5H,KAAK2I,YAAc,SACjEuD,mBAAoBlM,KAAK6H,SAAW,KACpCsE,mBAAoBnM,KAAK6H,SAAW,MAAQ,QAE9C,OAAO9B,EAAE,MAAO,CACd,MAAS,CAACzD,IAAOtC,KAAKyH,YACrB,CAAC1B,EAAE,KAAM,CACV,IAAO,UACP,MAASkG,EACT,MAAS3J,EAAI,WACb,GAAM,CACJ,cAAiBtC,KAAKwK,kBAEvB,CAACxK,KAAKqL,oBCjRT,EAAmB,OAAA5E,EAAA,MAAgB,UACnC,EAAkB,EAAiB,GACnC,EAAM,EAAiB,GACvB2F,EAAI,EAAiB,GAEV,SAAgB,CAC7B7J,MAAO,eAAS,GAAI,OAAa,CAC/BmF,aAAc,CACZhI,KAAM,CAACL,OAAQJ,QACfU,QAAS,GAEX4B,QAAS,CACP7B,KAAM0G,MACNzG,QAAS,WACP,MAAO,KAGX0M,gBAAiB,CACf3M,KAAMT,OACNU,QAAS,OAEX6H,SAAU,CACR9H,KAAMT,OACNU,QAAS,UAGbgC,KAAM,WACJ,MAAO,CACLqG,SAAU,GACVsE,iBAAkB,KAGtB7D,SAAU,CACR8D,aAAc,WACZ,OAAOvM,KAAKZ,WAAa,OAAAoN,EAAA,MAASxM,KAAKZ,YAAc,QAEvDqN,SAAU,WACR,IAAIlL,EAAUvB,KAAKuB,QACfmL,EAAcnL,EAAQ,IAAM,GAEhC,OAAImL,EAAY1E,SACP,UAGL0E,EAAY9G,OACP,SAGF,SAGX2C,MAAO,CACLhH,QAAS,CACPoL,QAAS,SACTC,WAAW,IAGf7K,QAAS,CACP8K,OAAQ,WACN,IAAItL,EAAUvB,KAAKuB,QACfkL,EAAWzM,KAAKyM,SAEH,SAAbA,EACFzM,KAAKsM,iBAAmB,CAAC,CACvB1G,OAAQrE,IAEY,YAAbkL,EACTzM,KAAK8M,gBAEL9M,KAAKsM,iBAAmB/K,GAG5BuL,cAAe,WACb,IAAIC,EAAY,GACZC,EAAS,CACXhF,SAAUhI,KAAKuB,SAGjB,MAAOyL,GAAUA,EAAOhF,SAAU,CAChC,IAAIN,EAAe,eAAMsF,EAAOtF,cAAgBsF,EAAOtF,cAAgB1H,KAAK0H,aAC5EqF,EAAU5I,KAAK,CACbyB,OAAQoH,EAAOhF,SACfP,UAAWuF,EAAOvF,UAClBC,aAAcA,IAEhBsF,EAASA,EAAOhF,SAASN,GAG3B1H,KAAKsM,iBAAmBS,GAE1BE,KAAM,SAAczH,GAClB,IAAIjC,EAAQvD,KAEZ,GAAsB,SAAlBA,KAAKyM,SACPzM,KAAK6F,MAAML,EAAOxF,KAAKkN,eAAe,GAAIlN,KAAKmN,eAAe,QACzD,CACL,IAAIvH,EAAS5F,KAAKqF,YAII,YAAlBrF,KAAKyM,WACP7G,EAASA,EAAOrB,KAAI,SAAUC,GAC5B,OAAOA,EAAKjB,EAAMiE,cAItBxH,KAAK6F,MAAML,EAAOI,EAAQ5F,KAAKoN,gBAGnCC,gBAAiB,SAAyBC,GAMxC,IALA,IAAIN,EAAS,CACXhF,SAAUhI,KAAKuB,SAEbgM,EAAUvN,KAAKoN,aAEVxC,EAAI,EAAGA,GAAK0C,EAAa1C,IAChCoC,EAASA,EAAOhF,SAASuF,EAAQ3C,IAGnC,MAAOoC,GAAUA,EAAOhF,SACtBsF,IACAtN,KAAKwN,gBAAgBF,EAAaN,EAAOhF,UACzCgF,EAASA,EAAOhF,SAASgF,EAAOtF,cAAgB,IAGpD+F,SAAU,SAAkBH,GAC1B,IAAIjJ,EAASrE,KAMb,GAJsB,YAAlBA,KAAKyM,UACPzM,KAAKqN,gBAAgBC,GAGD,SAAlBtN,KAAKyM,SACPzM,KAAK6F,MAAM,SAAU7F,KAAMA,KAAKkN,eAAe,GAAIlN,KAAKmN,eAAe,QAClE,CACL,IAAIvH,EAAS5F,KAAKqF,YAII,YAAlBrF,KAAKyM,WACP7G,EAASA,EAAOrB,KAAI,SAAUC,GAC5B,OAAOA,EAAKH,EAAOmD,cAIvBxH,KAAK6F,MAAM,SAAU7F,KAAM4F,EAAQ0H,KAIvCI,UAAW,SAAmBrD,GAC5B,OAAOrK,KAAKgI,SAASqC,IAIvB6C,eAAgB,SAAwB7C,GACtC,IAAIsD,EAAS3N,KAAK0N,UAAUrD,GAC5B,OAAOsD,GAAUA,EAAOzC,YAI1B0C,eAAgB,SAAwBvD,EAAOxJ,GAC7C,IAAI8M,EAAS3N,KAAK0N,UAAUrD,GAExBsD,IACFA,EAAO1C,SAASpK,GAEM,YAAlBb,KAAKyM,UACPzM,KAAKqN,gBAAgBhD,KAM3B8C,eAAgB,SAAwBG,GACtC,OAAQtN,KAAK0N,UAAUJ,IAAgB,IAAIxF,cAI7C+F,eAAgB,SAAwBP,EAAaQ,GACnD,IAAIH,EAAS3N,KAAK0N,UAAUJ,GAExBK,IACFA,EAAO1F,SAAS6F,GAEM,YAAlB9N,KAAKyM,UACPzM,KAAKqN,gBAAgBC,KAM3BS,gBAAiB,SAAyB1D,GACxC,OAAQrK,KAAKgI,SAASqC,IAAU,IAAIrF,SAItCwI,gBAAiB,SAAyBnD,EAAOrF,GAC/C,IAAI2I,EAAS3N,KAAKgI,SAASqC,GAEvBsD,GACFA,EAAO/E,WAAW5D,IAKtBK,UAAW,WACT,OAAOrF,KAAKgI,SAASzD,KAAI,SAAUyJ,GACjC,OAAOA,EAAM9C,eAKjB+C,UAAW,SAAmBrI,GAC5B,IAAID,EAAS3F,KAEb4F,EAAOd,SAAQ,SAAUjE,EAAOwJ,GAC9B1E,EAAOiI,eAAevD,EAAOxJ,OAKjCuM,WAAY,WACV,OAAOpN,KAAKgI,SAASzD,KAAI,SAAUyJ,GACjC,OAAOA,EAAMlG,iBAKjBoG,WAAY,SAAoBX,GAC9B,IAAIY,EAASnO,KAEbuN,EAAQzI,SAAQ,SAAUgJ,EAAaR,GACrCa,EAAON,eAAeP,EAAaQ,OAIvCM,QAAS,WACPpO,KAAKgI,SAASlD,SAAQ,SAAUkJ,GAC9B,OAAOA,EAAMvD,kBAEfzK,KAAKiN,KAAK,YAEZoB,OAAQ,WACNrO,KAAKiN,KAAK,WAEZqB,SAAU,WACR,IAAIvI,EAAI/F,KAAKE,eACTqO,EAAYvO,KAAKiG,MAAM,SAE3B,OAAIsI,IAIAvO,KAAKhB,MACA+G,EAAE,MAAO,CACd,MAAS,CAAC,eAAgB,EAAI,WAC7B,CAAC/F,KAAKhB,aAHX,IAMFwP,WAAY,WACV,IAAIzI,EAAI/F,KAAKE,eAEb,GAAIF,KAAKV,YACP,OAAOyG,EAAE,MAAO,CACd,MAAS,EAAI,YACZ,CAAC/F,KAAKiG,SAAW,CAACF,EAAE,SAAU,CAC/B,MAAS,CACP,KAAQ,UAEV,MAAS,EAAI,UACb,GAAM,CACJ,MAAS/F,KAAKqO,SAEf,CAACrO,KAAKT,kBAAoB6M,EAAE,YAAapM,KAAKsO,WAAYvI,EAAE,SAAU,CACvE,MAAS,CACP,KAAQ,UAEV,MAAS,EAAI,WACb,GAAM,CACJ,MAAS/F,KAAKoO,UAEf,CAACpO,KAAKR,mBAAqB4M,EAAE,iBAGpCqC,WAAY,WACV,IAAI1I,EAAI/F,KAAKE,eACTqM,EAAevM,KAAKuM,aACpBmC,EAAanC,EAAevM,KAAKJ,iBACjC+O,EAAa,CACfpD,OAAQgB,EAAe,MAErBqC,EAAe,CACjBrD,OAAQmD,EAAa,MAEnBG,EAAY,CACdC,eAAgB,SAAWJ,EAAanC,GAAgB,EAAI,MAE9D,OAAOxG,EAAE,MAAO,CACd,MAAS,EAAI,WACb,MAAS6I,EACT,GAAM,CACJ,UAAa,SAEd,CAAC5O,KAAK+O,iBAAkBhJ,EAAE,MAAO,CAClC,MAAS,EAAI,QACb,MAAS8I,IACP9I,EAAE,MAAO,CACX,MAAS,CAAC,OAAyB,EAAI,UACvC,MAAS4I,OAGbI,eAAgB,WACd,IAAIC,EAAShP,KAET+F,EAAI/F,KAAKE,eACb,OAAOF,KAAKsM,iBAAiB/H,KAAI,SAAUC,EAAM8I,GAC/C,OAAOvH,EAAEkJ,EAAc,CACrB,MAAS,CACP,SAAYD,EAAOxH,SACnB,UAAawH,EAAOvP,UACpB,UAAa+E,EAAKiD,UAClB,WAAcuH,EAAOzC,aACrB,aAAgB,eAAM/H,EAAKkD,cAAgBlD,EAAKkD,cAAgBsH,EAAOtH,aACvE,cAAiBsH,EAAOnP,cACxB,iBAAoBmP,EAAOpP,iBAC3B,eAAkB4E,EAAKoB,QAEzB,GAAM,CACJ,OAAU,WACRoJ,EAAOvB,SAASH,YAO5BxN,OAAQ,SAAgBiG,GACtB,OAAOA,EAAE,MAAO,CACd,MAAS,KACR,CAA0B,QAAzB/F,KAAKqM,gBAA4BrM,KAAKwO,aAAezI,IAAK/F,KAAKd,QAAU6G,EAAE,OAAS,CACtF,MAAS,EAAI,aACVA,IAAK/F,KAAKiG,MAAM,eAAgBjG,KAAKyO,aAAczO,KAAKiG,MAAM,kBAA4C,WAAzBjG,KAAKqM,gBAA+BrM,KAAKwO,aAAezI","file":"js/chunk-256572da.6b4f4dc6.js","sourcesContent":["export var DEFAULT_ITEM_HEIGHT = 44;\nexport var pickerProps = {\n  title: String,\n  loading: Boolean,\n  itemHeight: [Number, String],\n  showToolbar: Boolean,\n  cancelButtonText: String,\n  confirmButtonText: String,\n  allowHtml: {\n    type: Boolean,\n    default: true\n  },\n  visibleItemCount: {\n    type: [Number, String],\n    default: 6\n  },\n  swipeDuration: {\n    type: [Number, String],\n    default: 1000\n  }\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-form',{staticStyle:{\"margin-top\":\"30px\"},on:{\"submit\":_vm.onSubmit}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('van-image',{attrs:{\"round\":\"\",\"width\":\"10rem\",\"height\":\"10rem\",\"src\":_vm.avatar?_vm.avatar:'../vant/cat.jpeg'}}),_c('input',{staticClass:\"form-control-file\",staticStyle:{\"width\":\"220px\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.avatarChange}})],1),_c('van-field',{staticStyle:{\"padding-left\":\"30px\",\"margin-top\":\"30px\",\"font-size\":\"16px\"},attrs:{\"name\":\"用户名\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"disabled\":\"\"},model:{value:(this.username),callback:function ($$v) {_vm.$set(this, \"username\", $$v)},expression:\"this.username\"}}),_c('van-field',{staticStyle:{\"padding-left\":\"30px\",\"font-size\":\"16px\"},attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('van-field',{staticStyle:{\"padding-left\":\"30px\",\"font-size\":\"16px\"},attrs:{\"name\":\"年龄\",\"label\":\"年龄\",\"placeholder\":\"年龄\"},model:{value:(_vm.age),callback:function ($$v) {_vm.age=$$v},expression:\"age\"}}),_c('van-field',{staticStyle:{\"padding-left\":\"30px\"},attrs:{\"readonly\":\"\",\"clickable\":\"\",\"label\":\"性别\",\"value\":_vm.gender,\"placeholder\":\"选择\"},on:{\"click\":function($event){_vm.showPicker = true}}}),_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showPicker),callback:function ($$v) {_vm.showPicker=$$v},expression:\"showPicker\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"columns\":_vm.columns},on:{\"cancel\":function($event){_vm.showPicker = false},\"confirm\":_vm.onConfirm}})],1),_c('div',{staticStyle:{\"margin\":\"26px 16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"修改\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-form @submit=\"onSubmit\" style=\"margin-top: 30px\">\r\n    <div style=\"text-align:center\">\r\n      <van-image\r\n        round\r\n        width=\"10rem\"\r\n        height=\"10rem\"\r\n        :src=\"avatar?avatar:'../vant/cat.jpeg'\"\r\n      />\r\n      <input type=\"file\" class=\"form-control-file\" @change=\"avatarChange\" style=\"width:220px\" />\r\n    </div>\r\n    <van-field\r\n      v-model=\"this.username\"\r\n      name=\"用户名\"\r\n      label=\"用户名\"\r\n      placeholder=\"用户名\"\r\n      style=\"padding-left: 30px;margin-top:30px; font-size: 16px\"\r\n      disabled\r\n    />\r\n    <van-field\r\n      v-model=\"password\"\r\n      type=\"password\"\r\n      name=\"密码\"\r\n      label=\"密码\"\r\n      placeholder=\"密码\"\r\n      style=\"padding-left: 30px; font-size: 16px\"\r\n    />\r\n    <van-field\r\n      v-model=\"age\"\r\n      name=\"年龄\"\r\n      label=\"年龄\"\r\n      placeholder=\"年龄\"\r\n      style=\"padding-left: 30px; font-size: 16px\"\r\n    />\r\n    <van-field\r\n      style=\"padding-left: 30px\"\r\n      readonly\r\n      clickable\r\n      label=\"性别\"\r\n      :value=\"gender\"\r\n      placeholder=\"选择\"\r\n      @click=\"showPicker = true\"\r\n    />\r\n    <van-popup v-model=\"showPicker\" round position=\"bottom\">\r\n      <van-picker\r\n        show-toolbar\r\n        :columns=\"columns\"\r\n        @cancel=\"showPicker = false\"\r\n        @confirm=\"onConfirm\"\r\n      />\r\n    </van-popup>\r\n    <div style=\"margin: 26px 16px;\">\r\n      <van-button round block type=\"info\" native-type=\"submit\">修改</van-button>\r\n    </div>\r\n  </van-form>\r\n</template>\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { Form } from \"vant\";\r\nimport { Picker } from \"vant\";\r\nimport { Popup } from \"vant\";\r\nVue.use(Popup);\r\nVue.use(Picker);\r\nVue.use(Form);\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: \"\",\r\n      password: \"\",\r\n      age: \"\",\r\n      gender: \"\",\r\n      showPicker: false,\r\n      columns: [\"男\", \"女\", \"保密\"],\r\n      imageUrl: \"\",\r\n      avatar: \"\",\r\n      _id: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    onConfirm(value) {\r\n      this.gender = value;\r\n      this.showPicker = false;\r\n    },\r\n    async onSubmit() {\r\n      let currentUser = localStorage.getItem(\"currentUser\");\r\n      currentUser = JSON.parse(currentUser);\r\n      let _id = currentUser._id;\r\n      this._id = _id;\r\n      const { data } = await this.$request.put(\"/user/\" + _id, {\r\n        params: {\r\n          username: this.username,\r\n          password: this.password,\r\n          age: this.age,\r\n          gender: this.gender\r\n        },\r\n      });\r\n      if (data.code === 1) {\r\n        this.$router.push(\"/login\");\r\n      }\r\n    },\r\n    async avatarChange(e) {\r\n      let currentUser = localStorage.getItem(\"currentUser\");\r\n      currentUser = JSON.parse(currentUser);\r\n      const id = currentUser._id;\r\n      const data = new FormData();\r\n      data.set(\"_id\", id);\r\n      data.set(\"avatar\", e.target.files[0]);\r\n\r\n      const result = await this.$request.post(\"/upload/user\", data, {\r\n        contentType: false,\r\n      });\r\n\r\n      this.avatar = result.avatarUrl;\r\n      // 更新本地存储数据\r\n      if (id === currentUser._id) {\r\n        currentUser.avatarUrl = result.avatarUrl;\r\n        localStorage.setItem(\"currentUser\", JSON.stringify(currentUser));\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    const res = JSON.parse(localStorage.getItem(\"currentUser\"));\r\n    this.username = res.username;\r\n    this.gender = res.gender;\r\n    this.age = res.age;\r\n    this.avatar = res.avatarUrl;\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=972eb2a6&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import '../../style/base.css';\n","import { createNamespace } from '../utils';\nimport { sortChildren } from '../utils/vnodes';\n\nvar _createNamespace = createNamespace('form'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    colon: Boolean,\n    labelWidth: [Number, String],\n    labelAlign: String,\n    inputAlign: String,\n    scrollToError: Boolean,\n    validateFirst: Boolean,\n    errorMessageAlign: String,\n    submitOnEnter: {\n      type: Boolean,\n      default: true\n    },\n    validateTrigger: {\n      type: String,\n      default: 'onBlur'\n    },\n    showError: {\n      type: Boolean,\n      default: true\n    },\n    showErrorMessage: {\n      type: Boolean,\n      default: true\n    }\n  },\n  provide: function provide() {\n    return {\n      vanForm: this\n    };\n  },\n  data: function data() {\n    return {\n      fields: []\n    };\n  },\n  methods: {\n    validateSeq: function validateSeq() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        var errors = [];\n\n        _this.fields.reduce(function (promise, field) {\n          return promise.then(function () {\n            if (!errors.length) {\n              return field.validate().then(function (error) {\n                if (error) {\n                  errors.push(error);\n                }\n              });\n            }\n          });\n        }, Promise.resolve()).then(function () {\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    },\n    validateAll: function validateAll() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        Promise.all(_this2.fields.map(function (item) {\n          return item.validate();\n        })).then(function (errors) {\n          errors = errors.filter(function (item) {\n            return item;\n          });\n\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    },\n    // @exposed-api\n    validate: function validate(name) {\n      if (name) {\n        return this.validateField(name);\n      }\n\n      return this.validateFirst ? this.validateSeq() : this.validateAll();\n    },\n    validateField: function validateField(name) {\n      var matched = this.fields.filter(function (item) {\n        return item.name === name;\n      });\n\n      if (matched.length) {\n        return new Promise(function (resolve, reject) {\n          matched[0].validate().then(function (error) {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n\n      return Promise.reject();\n    },\n    // @exposed-api\n    resetValidation: function resetValidation(name) {\n      this.fields.forEach(function (item) {\n        if (!name || item.name === name) {\n          item.resetValidation();\n        }\n      });\n    },\n    // @exposed-api\n    scrollToField: function scrollToField(name, options) {\n      this.fields.forEach(function (item) {\n        if (item.name === name) {\n          item.$el.scrollIntoView(options);\n        }\n      });\n    },\n    addField: function addField(field) {\n      this.fields.push(field);\n      sortChildren(this.fields, this);\n    },\n    removeField: function removeField(field) {\n      this.fields = this.fields.filter(function (item) {\n        return item !== field;\n      });\n    },\n    getValues: function getValues() {\n      return this.fields.reduce(function (form, field) {\n        form[field.name] = field.formValue;\n        return form;\n      }, {});\n    },\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      this.submit();\n    },\n    // @exposed-api\n    submit: function submit() {\n      var _this3 = this;\n\n      var values = this.getValues();\n      this.validate().then(function () {\n        _this3.$emit('submit', values);\n      }).catch(function (errors) {\n        _this3.$emit('failed', {\n          values: values,\n          errors: errors\n        });\n\n        if (_this3.scrollToError) {\n          _this3.scrollToField(errors[0].name);\n        }\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"form\", {\n      \"class\": bem(),\n      \"on\": {\n        \"submit\": this.onSubmit\n      }\n    }, [this.slots()]);\n  }\n});","import { deepAssign } from './deep-assign';\nexport function deepClone(obj) {\n  if (Array.isArray(obj)) {\n    return obj.map(function (item) {\n      return deepClone(item);\n    });\n  }\n\n  if (typeof obj === 'object') {\n    return deepAssign({}, obj);\n  }\n\n  return obj;\n}","import _mergeJSXProps2 from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport _mergeJSXProps from \"@vue/babel-helper-vue-jsx-merge-props\";\nimport { deepClone } from '../utils/deep-clone';\nimport { createNamespace, isObject } from '../utils';\nimport { range } from '../utils/format/number';\nimport { preventDefault } from '../utils/dom/event';\nimport { TouchMixin } from '../mixins/touch';\nvar DEFAULT_DURATION = 200; // 惯性滑动思路:\n// 在手指离开屏幕时，如果和上一次 move 时的间隔小于 `MOMENTUM_LIMIT_TIME` 且 move\n// 距离大于 `MOMENTUM_LIMIT_DISTANCE` 时，执行惯性滑动\n\nvar MOMENTUM_LIMIT_TIME = 300;\nvar MOMENTUM_LIMIT_DISTANCE = 15;\n\nvar _createNamespace = createNamespace('picker-column'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nfunction getElementTranslateY(element) {\n  var style = window.getComputedStyle(element);\n  var transform = style.transform || style.webkitTransform;\n  var translateY = transform.slice(7, transform.length - 1).split(', ')[5];\n  return Number(translateY);\n}\n\nfunction isOptionDisabled(option) {\n  return isObject(option) && option.disabled;\n}\n\nexport default createComponent({\n  mixins: [TouchMixin],\n  props: {\n    valueKey: String,\n    allowHtml: Boolean,\n    className: String,\n    itemHeight: Number,\n    defaultIndex: Number,\n    swipeDuration: [Number, String],\n    visibleItemCount: [Number, String],\n    initialOptions: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      offset: 0,\n      duration: 0,\n      options: deepClone(this.initialOptions),\n      currentIndex: this.defaultIndex\n    };\n  },\n  created: function created() {\n    if (this.$parent.children) {\n      this.$parent.children.push(this);\n    }\n\n    this.setIndex(this.currentIndex);\n  },\n  mounted: function mounted() {\n    this.bindTouchEvent(this.$el);\n  },\n  destroyed: function destroyed() {\n    var children = this.$parent.children;\n\n    if (children) {\n      children.splice(children.indexOf(this), 1);\n    }\n  },\n  watch: {\n    initialOptions: 'setOptions',\n    defaultIndex: function defaultIndex(val) {\n      this.setIndex(val);\n    }\n  },\n  computed: {\n    count: function count() {\n      return this.options.length;\n    },\n    baseOffset: function baseOffset() {\n      return this.itemHeight * (this.visibleItemCount - 1) / 2;\n    }\n  },\n  methods: {\n    setOptions: function setOptions(options) {\n      if (JSON.stringify(options) !== JSON.stringify(this.options)) {\n        this.options = deepClone(options);\n        this.setIndex(this.defaultIndex);\n      }\n    },\n    onTouchStart: function onTouchStart(event) {\n      this.touchStart(event);\n\n      if (this.moving) {\n        var translateY = getElementTranslateY(this.$refs.wrapper);\n        this.offset = Math.min(0, translateY - this.baseOffset);\n        this.startOffset = this.offset;\n      } else {\n        this.startOffset = this.offset;\n      }\n\n      this.duration = 0;\n      this.transitionEndTrigger = null;\n      this.touchStartTime = Date.now();\n      this.momentumOffset = this.startOffset;\n    },\n    onTouchMove: function onTouchMove(event) {\n      this.touchMove(event);\n\n      if (this.direction === 'vertical') {\n        this.moving = true;\n        preventDefault(event, true);\n      }\n\n      this.offset = range(this.startOffset + this.deltaY, -(this.count * this.itemHeight), this.itemHeight);\n      var now = Date.now();\n\n      if (now - this.touchStartTime > MOMENTUM_LIMIT_TIME) {\n        this.touchStartTime = now;\n        this.momentumOffset = this.offset;\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      var _this = this;\n\n      var distance = this.offset - this.momentumOffset;\n      var duration = Date.now() - this.touchStartTime;\n      var allowMomentum = duration < MOMENTUM_LIMIT_TIME && Math.abs(distance) > MOMENTUM_LIMIT_DISTANCE;\n\n      if (allowMomentum) {\n        this.momentum(distance, duration);\n        return;\n      }\n\n      var index = this.getIndexByOffset(this.offset);\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true); // compatible with desktop scenario\n      // use setTimeout to skip the click event triggered after touchstart\n\n      setTimeout(function () {\n        _this.moving = false;\n      }, 0);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      this.stopMomentum();\n    },\n    onClickItem: function onClickItem(index) {\n      if (this.moving) {\n        return;\n      }\n\n      this.transitionEndTrigger = null;\n      this.duration = DEFAULT_DURATION;\n      this.setIndex(index, true);\n    },\n    adjustIndex: function adjustIndex(index) {\n      index = range(index, 0, this.count);\n\n      for (var i = index; i < this.count; i++) {\n        if (!isOptionDisabled(this.options[i])) return i;\n      }\n\n      for (var _i = index - 1; _i >= 0; _i--) {\n        if (!isOptionDisabled(this.options[_i])) return _i;\n      }\n    },\n    getOptionText: function getOptionText(option) {\n      if (isObject(option) && this.valueKey in option) {\n        return option[this.valueKey];\n      }\n\n      return option;\n    },\n    setIndex: function setIndex(index, emitChange) {\n      var _this2 = this;\n\n      index = this.adjustIndex(index) || 0;\n      var offset = -index * this.itemHeight;\n\n      var trigger = function trigger() {\n        if (index !== _this2.currentIndex) {\n          _this2.currentIndex = index;\n\n          if (emitChange) {\n            _this2.$emit('change', index);\n          }\n        }\n      }; // trigger the change event after transitionend when moving\n\n\n      if (this.moving && offset !== this.offset) {\n        this.transitionEndTrigger = trigger;\n      } else {\n        trigger();\n      }\n\n      this.offset = offset;\n    },\n    setValue: function setValue(value) {\n      var options = this.options;\n\n      for (var i = 0; i < options.length; i++) {\n        if (this.getOptionText(options[i]) === value) {\n          return this.setIndex(i);\n        }\n      }\n    },\n    getValue: function getValue() {\n      return this.options[this.currentIndex];\n    },\n    getIndexByOffset: function getIndexByOffset(offset) {\n      return range(Math.round(-offset / this.itemHeight), 0, this.count - 1);\n    },\n    momentum: function momentum(distance, duration) {\n      var speed = Math.abs(distance / duration);\n      distance = this.offset + speed / 0.003 * (distance < 0 ? -1 : 1);\n      var index = this.getIndexByOffset(distance);\n      this.duration = +this.swipeDuration;\n      this.setIndex(index, true);\n    },\n    stopMomentum: function stopMomentum() {\n      this.moving = false;\n      this.duration = 0;\n\n      if (this.transitionEndTrigger) {\n        this.transitionEndTrigger();\n        this.transitionEndTrigger = null;\n      }\n    },\n    genOptions: function genOptions() {\n      var _this3 = this;\n\n      var h = this.$createElement;\n      var optionStyle = {\n        height: this.itemHeight + \"px\"\n      };\n      return this.options.map(function (option, index) {\n        var _domProps;\n\n        var text = _this3.getOptionText(option);\n\n        var disabled = isOptionDisabled(option);\n        var data = {\n          style: optionStyle,\n          attrs: {\n            role: 'button',\n            tabindex: disabled ? -1 : 0\n          },\n          class: [bem('item', {\n            disabled: disabled,\n            selected: index === _this3.currentIndex\n          })],\n          on: {\n            click: function click() {\n              _this3.onClickItem(index);\n            }\n          }\n        };\n        var childData = {\n          class: 'van-ellipsis',\n          domProps: (_domProps = {}, _domProps[_this3.allowHtml ? 'innerHTML' : 'textContent'] = text, _domProps)\n        };\n        return h(\"li\", _mergeJSXProps2([{}, data]), [h(\"div\", _mergeJSXProps([{}, childData]))]);\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    var wrapperStyle = {\n      transform: \"translate3d(0, \" + (this.offset + this.baseOffset) + \"px, 0)\",\n      transitionDuration: this.duration + \"ms\",\n      transitionProperty: this.duration ? 'all' : 'none'\n    };\n    return h(\"div\", {\n      \"class\": [bem(), this.className]\n    }, [h(\"ul\", {\n      \"ref\": \"wrapper\",\n      \"style\": wrapperStyle,\n      \"class\": bem('wrapper'),\n      \"on\": {\n        \"transitionend\": this.onTransitionEnd\n      }\n    }, [this.genOptions()])]);\n  }\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// Utils\nimport { createNamespace, isDef } from '../utils';\nimport { preventDefault } from '../utils/dom/event';\nimport { BORDER_UNSET_TOP_BOTTOM } from '../utils/constant';\nimport { pickerProps, DEFAULT_ITEM_HEIGHT } from './shared';\nimport { unitToPx } from '../utils/format/unit'; // Components\n\nimport Loading from '../loading';\nimport PickerColumn from './PickerColumn';\n\nvar _createNamespace = createNamespace('picker'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1],\n    t = _createNamespace[2];\n\nexport default createComponent({\n  props: _extends({}, pickerProps, {\n    defaultIndex: {\n      type: [Number, String],\n      default: 0\n    },\n    columns: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    toolbarPosition: {\n      type: String,\n      default: 'top'\n    },\n    valueKey: {\n      type: String,\n      default: 'text'\n    }\n  }),\n  data: function data() {\n    return {\n      children: [],\n      formattedColumns: []\n    };\n  },\n  computed: {\n    itemPxHeight: function itemPxHeight() {\n      return this.itemHeight ? unitToPx(this.itemHeight) : DEFAULT_ITEM_HEIGHT;\n    },\n    dataType: function dataType() {\n      var columns = this.columns;\n      var firstColumn = columns[0] || {};\n\n      if (firstColumn.children) {\n        return 'cascade';\n      }\n\n      if (firstColumn.values) {\n        return 'object';\n      }\n\n      return 'text';\n    }\n  },\n  watch: {\n    columns: {\n      handler: 'format',\n      immediate: true\n    }\n  },\n  methods: {\n    format: function format() {\n      var columns = this.columns,\n          dataType = this.dataType;\n\n      if (dataType === 'text') {\n        this.formattedColumns = [{\n          values: columns\n        }];\n      } else if (dataType === 'cascade') {\n        this.formatCascade();\n      } else {\n        this.formattedColumns = columns;\n      }\n    },\n    formatCascade: function formatCascade() {\n      var formatted = [];\n      var cursor = {\n        children: this.columns\n      };\n\n      while (cursor && cursor.children) {\n        var defaultIndex = isDef(cursor.defaultIndex) ? cursor.defaultIndex : +this.defaultIndex;\n        formatted.push({\n          values: cursor.children,\n          className: cursor.className,\n          defaultIndex: defaultIndex\n        });\n        cursor = cursor.children[defaultIndex];\n      }\n\n      this.formattedColumns = formatted;\n    },\n    emit: function emit(event) {\n      var _this = this;\n\n      if (this.dataType === 'text') {\n        this.$emit(event, this.getColumnValue(0), this.getColumnIndex(0));\n      } else {\n        var values = this.getValues(); // compatible with old version of wrong parameters\n        // should be removed in next major version\n        // see: https://github.com/youzan/vant/issues/5905\n\n        if (this.dataType === 'cascade') {\n          values = values.map(function (item) {\n            return item[_this.valueKey];\n          });\n        }\n\n        this.$emit(event, values, this.getIndexes());\n      }\n    },\n    onCascadeChange: function onCascadeChange(columnIndex) {\n      var cursor = {\n        children: this.columns\n      };\n      var indexes = this.getIndexes();\n\n      for (var i = 0; i <= columnIndex; i++) {\n        cursor = cursor.children[indexes[i]];\n      }\n\n      while (cursor && cursor.children) {\n        columnIndex++;\n        this.setColumnValues(columnIndex, cursor.children);\n        cursor = cursor.children[cursor.defaultIndex || 0];\n      }\n    },\n    onChange: function onChange(columnIndex) {\n      var _this2 = this;\n\n      if (this.dataType === 'cascade') {\n        this.onCascadeChange(columnIndex);\n      }\n\n      if (this.dataType === 'text') {\n        this.$emit('change', this, this.getColumnValue(0), this.getColumnIndex(0));\n      } else {\n        var values = this.getValues(); // compatible with old version of wrong parameters\n        // should be removed in next major version\n        // see: https://github.com/youzan/vant/issues/5905\n\n        if (this.dataType === 'cascade') {\n          values = values.map(function (item) {\n            return item[_this2.valueKey];\n          });\n        }\n\n        this.$emit('change', this, values, columnIndex);\n      }\n    },\n    // get column instance by index\n    getColumn: function getColumn(index) {\n      return this.children[index];\n    },\n    // @exposed-api\n    // get column value by index\n    getColumnValue: function getColumnValue(index) {\n      var column = this.getColumn(index);\n      return column && column.getValue();\n    },\n    // @exposed-api\n    // set column value by index\n    setColumnValue: function setColumnValue(index, value) {\n      var column = this.getColumn(index);\n\n      if (column) {\n        column.setValue(value);\n\n        if (this.dataType === 'cascade') {\n          this.onCascadeChange(index);\n        }\n      }\n    },\n    // @exposed-api\n    // get column option index by column index\n    getColumnIndex: function getColumnIndex(columnIndex) {\n      return (this.getColumn(columnIndex) || {}).currentIndex;\n    },\n    // @exposed-api\n    // set column option index by column index\n    setColumnIndex: function setColumnIndex(columnIndex, optionIndex) {\n      var column = this.getColumn(columnIndex);\n\n      if (column) {\n        column.setIndex(optionIndex);\n\n        if (this.dataType === 'cascade') {\n          this.onCascadeChange(columnIndex);\n        }\n      }\n    },\n    // @exposed-api\n    // get options of column by index\n    getColumnValues: function getColumnValues(index) {\n      return (this.children[index] || {}).options;\n    },\n    // @exposed-api\n    // set options of column by index\n    setColumnValues: function setColumnValues(index, options) {\n      var column = this.children[index];\n\n      if (column) {\n        column.setOptions(options);\n      }\n    },\n    // @exposed-api\n    // get values of all columns\n    getValues: function getValues() {\n      return this.children.map(function (child) {\n        return child.getValue();\n      });\n    },\n    // @exposed-api\n    // set values of all columns\n    setValues: function setValues(values) {\n      var _this3 = this;\n\n      values.forEach(function (value, index) {\n        _this3.setColumnValue(index, value);\n      });\n    },\n    // @exposed-api\n    // get indexes of all columns\n    getIndexes: function getIndexes() {\n      return this.children.map(function (child) {\n        return child.currentIndex;\n      });\n    },\n    // @exposed-api\n    // set indexes of all columns\n    setIndexes: function setIndexes(indexes) {\n      var _this4 = this;\n\n      indexes.forEach(function (optionIndex, columnIndex) {\n        _this4.setColumnIndex(columnIndex, optionIndex);\n      });\n    },\n    // @exposed-api\n    confirm: function confirm() {\n      this.children.forEach(function (child) {\n        return child.stopMomentum();\n      });\n      this.emit('confirm');\n    },\n    cancel: function cancel() {\n      this.emit('cancel');\n    },\n    genTitle: function genTitle() {\n      var h = this.$createElement;\n      var titleSlot = this.slots('title');\n\n      if (titleSlot) {\n        return titleSlot;\n      }\n\n      if (this.title) {\n        return h(\"div\", {\n          \"class\": ['van-ellipsis', bem('title')]\n        }, [this.title]);\n      }\n    },\n    genToolbar: function genToolbar() {\n      var h = this.$createElement;\n\n      if (this.showToolbar) {\n        return h(\"div\", {\n          \"class\": bem('toolbar')\n        }, [this.slots() || [h(\"button\", {\n          \"attrs\": {\n            \"type\": \"button\"\n          },\n          \"class\": bem('cancel'),\n          \"on\": {\n            \"click\": this.cancel\n          }\n        }, [this.cancelButtonText || t('cancel')]), this.genTitle(), h(\"button\", {\n          \"attrs\": {\n            \"type\": \"button\"\n          },\n          \"class\": bem('confirm'),\n          \"on\": {\n            \"click\": this.confirm\n          }\n        }, [this.confirmButtonText || t('confirm')])]]);\n      }\n    },\n    genColumns: function genColumns() {\n      var h = this.$createElement;\n      var itemPxHeight = this.itemPxHeight;\n      var wrapHeight = itemPxHeight * this.visibleItemCount;\n      var frameStyle = {\n        height: itemPxHeight + \"px\"\n      };\n      var columnsStyle = {\n        height: wrapHeight + \"px\"\n      };\n      var maskStyle = {\n        backgroundSize: \"100% \" + (wrapHeight - itemPxHeight) / 2 + \"px\"\n      };\n      return h(\"div\", {\n        \"class\": bem('columns'),\n        \"style\": columnsStyle,\n        \"on\": {\n          \"touchmove\": preventDefault\n        }\n      }, [this.genColumnItems(), h(\"div\", {\n        \"class\": bem('mask'),\n        \"style\": maskStyle\n      }), h(\"div\", {\n        \"class\": [BORDER_UNSET_TOP_BOTTOM, bem('frame')],\n        \"style\": frameStyle\n      })]);\n    },\n    genColumnItems: function genColumnItems() {\n      var _this5 = this;\n\n      var h = this.$createElement;\n      return this.formattedColumns.map(function (item, columnIndex) {\n        return h(PickerColumn, {\n          \"attrs\": {\n            \"valueKey\": _this5.valueKey,\n            \"allowHtml\": _this5.allowHtml,\n            \"className\": item.className,\n            \"itemHeight\": _this5.itemPxHeight,\n            \"defaultIndex\": isDef(item.defaultIndex) ? item.defaultIndex : +_this5.defaultIndex,\n            \"swipeDuration\": _this5.swipeDuration,\n            \"visibleItemCount\": _this5.visibleItemCount,\n            \"initialOptions\": item.values\n          },\n          \"on\": {\n            \"change\": function change() {\n              _this5.onChange(columnIndex);\n            }\n          }\n        });\n      });\n    }\n  },\n  render: function render(h) {\n    return h(\"div\", {\n      \"class\": bem()\n    }, [this.toolbarPosition === 'top' ? this.genToolbar() : h(), this.loading ? h(Loading, {\n      \"class\": bem('loading')\n    }) : h(), this.slots('columns-top'), this.genColumns(), this.slots('columns-bottom'), this.toolbarPosition === 'bottom' ? this.genToolbar() : h()]);\n  }\n});"],"sourceRoot":""}